<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Dashboard</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <script src="node_modules\moment\moment.js"></script>
  <script>

    var daysFromSunday = moment().date(1).format("d");
    var firstDay = moment().date(1).subtract(daysFromSunday, "days");

    function init() {
      updateTime();
      var updateTimeInterval = setInterval(updateTime, 1000);
      initDate();
      generateCalendar();
      hightlightCurrentDay();
    }

    function updateTime() {
      document.getElementById("time").innerHTML = moment().format("hh:mm:ss");
    }

    function initDate() {
      document.getElementById("date").innerHTML = moment().format("dddd, MMMM D");
    }

    function generateCalendar() {
      const cellTemplate = `<div id="toReplace_date" class="calendar-day">toReplace_day<p class="event-text">Event</p></div>`;

      let currentDay = firstDay;
      let calendarStr = "";
      for(let i = 0; i < 6; i++) {
        calendarStr += `<div id="week${i}" class="week">`;
        for(let j = 0; j < 7; j++) {
          calendarStr += cellTemplate.replace("toReplace_date", currentDay.format("MMDD")).replace("toReplace_day", currentDay.format("DD"));
          currentDay.add(1, "days");
        }
        calendarStr += `</div>`;
      }
      document.getElementById("calendar-container").innerHTML = calendarStr;
    }

    function hightlightCurrentDay() {
      let currentDay = moment().format("MMDD");
      document.getElementById(currentDay).style.opacity = 1;
    }

  </script>
</head>

<body onload="init()">
  <div id="header" style="display: flex;">
    <h1 id="time">hh:mm:ss</h1>
    <h1 id="date">dddd, MMMM D, YYYY</h1>
  </div>


  <div id="calendar-container">
    Calendar
  </div>
</body>

</html>
